<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestión de Aprendices - Subir Archivo</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/admin/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-top">
          <div class="logo-section">
            <!-- CORRECCIÓN: Se ajustó la ruta de la imagen para que se muestre correctamente. -->
            <img
              src="{{ url_for('static', filename='img/green-sena-logo.webp') }}"
              alt="Logo SENA"
              class="logo-sena"
            />
            <div class="sena-info">
              <h1>Centro Industrial<br />y del Desarrollo Tecnológico</h1>
              <p class="subtitle">Regional Santander</p>
            </div>
          </div>
          <div class="header-actions">
            <span style="color: #333; margin-right: 15px"
              >{{ usuario.nombre_completo }}</span
            >
            <a href="{{ url_for('logout') }}" class="btn-cerrar"
              >Cerrar Sesión</a
            >
          </div>
        </div>
        <div class="header-nav">
          <nav>
            <a href="{{ url_for('admin_dashboard') }}" class="nav-link active"
              >Subir Archivo</a
            >
            <a href="{{ url_for('admin_fichas') }}" class="nav-link"
              >Ver Fichas</a
            >
            <a href="{{ url_for('admin_instructores') }}" class="nav-link"
              >Registrar Instructor</a
            >
          </nav>
        </div>
      </header>
      <div class="header-separator"></div>

      <main>
        <div class="upload-section">
          <h2>Subir Archivo de Aprendices</h2>

          <!-- Mostrar mensajes flash -->
          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %}
          <div class="messages">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
          {% endif %} {% endwith %}

          <form
            action="{{ url_for('upload_file') }}"
            method="post"
            enctype="multipart/form-data"
            class="upload-form"
          >
            <div class="file-input-container">
              <input
                type="file"
                id="file"
                name="file"
                accept=".xlsx,.xls"
                required
              />
              <label for="file" class="file-label">
                <div class="file-icon">
                  <svg
                    width="48"
                    height="48"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <polyline
                      points="14,2 14,8 20,8"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
                <div class="file-text">
                  <span id="file-name">Arrastra tu archivo Excel aquí</span>
                </div>
                <div class="file-subtext">
                  o haz clic para seleccionar (.xlsx, .xls)
                </div>
              </label>
            </div>

            <button type="submit" class="btn-upload" id="upload-btn" disabled>
              <svg
                class="upload-icon"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <polyline
                  points="7,10 12,15 17,10"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <line
                  x1="12"
                  y1="15"
                  x2="12"
                  y2="3"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
              Procesar Archivo
            </button>
          </form>
        </div>
      </main>
    </div>

    <!-- CORRECCIÓN: Se cargó el script correcto 'upload.js' para esta página. -->
    <script src="{{ url_for('static', filename='js/admin/upload.js') }}"></script>
  </body>
</html>
